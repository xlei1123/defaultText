{"version":3,"file":"index.common.js","sources":["../src/index.ts"],"sourcesContent":["/**\n * 取默认值 多级key\n */\n\nexport default class Proxy2Default {\n  public defaultText;\n  public includes;\n  public excludes;\n  constructor(\n    defaultText: string | (() => string),\n    options?: { \n      includes?: (string|number)[], \n      excludes?: (string|number)[],\n    },\n  ) {\n    if (typeof defaultText === 'string') {\n      this.defaultText = defaultText;\n    } else {\n      this.defaultText = defaultText();\n    }\n    this.includes = options?.includes;\n    this.excludes = options?.excludes;\n  }\n  proxyObj(\n    obj: any, \n    options?: { \n      key?: string, \n      defaultText?: string|(() => string), \n      includes?: (string|number)[],\n      excludes?: (string|number)[],\n    }\n  ){\n    let _defaultText;\n    const _includes = options?.includes || this.includes;\n    const _excludes = options?.excludes || this.excludes;\n    if (typeof options?.defaultText === 'function') {\n      _defaultText = options.defaultText();\n    } else {\n      _defaultText = options?.defaultText || this.defaultText;\n    }\n    /**\n     * 如果不是对象\n     */\n    if (typeof obj !== 'object') {\n      if (_excludes?.includes(obj)) {\n        return obj;\n      }\n      if (_includes?.includes(obj)) {\n        return _defaultText;\n      }\n      if (!obj) return _defaultText;\n      return obj;\n    } else {\n      // 对象取key\n      // key 不存在直接给obj返回\n      const _key = options.key;\n      if (!_key) return {...obj};\n      const _proxyObj = new Proxy({...obj}, {\n        get: (obj, prop) => {\n          if (_excludes?.includes(obj[prop])) return obj[prop];\n          if (_includes?.includes(obj[prop])) return _defaultText;\n          if (!obj[prop]) return _defaultText;\n          return obj[prop];\n        }\n      });\n      return _proxyObj[_key];\n    }\n  }\n}\nconst newProxy2Default = new Proxy2Default('暂无')\nexport const proxyObj = newProxy2Default.proxyObj.bind(newProxy2Default);\n\n// example\n// const firstProxy2Default = new Proxy2Default('暂无', { includes: ['0'] })\n// export default firstProxy2Default;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;IAQE,uBACE,WAAoC,EACpC,OAGC;QAED,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE;YACnC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;SAChC;aAAM;YACL,IAAI,CAAC,WAAW,GAAG,WAAW,EAAE,CAAC;SAClC;QACD,IAAI,CAAC,QAAQ,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,QAAQ,CAAC;QAClC,IAAI,CAAC,QAAQ,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,QAAQ,CAAC;KACnC;IACD,gCAAQ,GAAR,UACE,GAAQ,EACR,OAKC;QAED,IAAI,YAAY,CAAC;QACjB,IAAM,SAAS,GAAG,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,QAAQ,KAAI,IAAI,CAAC,QAAQ,CAAC;QACrD,IAAM,SAAS,GAAG,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,QAAQ,KAAI,IAAI,CAAC,QAAQ,CAAC;QACrD,IAAI,QAAO,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,WAAW,CAAA,KAAK,UAAU,EAAE;YAC9C,YAAY,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;SACtC;aAAM;YACL,YAAY,GAAG,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,WAAW,KAAI,IAAI,CAAC,WAAW,CAAC;SACzD;;;;QAID,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YAC3B,IAAI,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,QAAQ,CAAC,GAAG,CAAC,EAAE;gBAC5B,OAAO,GAAG,CAAC;aACZ;YACD,IAAI,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,QAAQ,CAAC,GAAG,CAAC,EAAE;gBAC5B,OAAO,YAAY,CAAC;aACrB;YACD,IAAI,CAAC,GAAG;gBAAE,OAAO,YAAY,CAAC;YAC9B,OAAO,GAAG,CAAC;SACZ;aAAM;;;YAGL,IAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC;YACzB,IAAI,CAAC,IAAI;gBAAE,oBAAW,GAAG,EAAE;YAC3B,IAAM,SAAS,GAAG,IAAI,KAAK,cAAK,GAAG,GAAG;gBACpC,GAAG,EAAE,UAAC,GAAG,EAAE,IAAI;oBACb,IAAI,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;wBAAE,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC;oBACrD,IAAI,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;wBAAE,OAAO,YAAY,CAAC;oBACxD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;wBAAE,OAAO,YAAY,CAAC;oBACpC,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC;iBAClB;aACF,CAAC,CAAC;YACH,OAAO,SAAS,CAAC,IAAI,CAAC,CAAC;SACxB;KACF;IACH,oBAAC;AAAD,CAAC,IAAA;AACD,IAAM,gBAAgB,GAAG,IAAI,aAAa,CAAC,IAAI,CAAC,CAAA;IACnC,QAAQ,GAAG,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,gBAAgB,EAAE;AAEzE;AACA;AACA;;;;;"}