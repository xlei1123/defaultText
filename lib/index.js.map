{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["/**\n * 取默认值 多级key\n */\nexport default class Proxy2Default {\n  public defaultText;\n  public includes;\n  public excludes;\n  constructor(\n    defaultText: string | (() => string),\n    options?: { \n      includes?: (string|number)[], \n      excludes?: (string|number)[],\n    },\n  ) {\n    if (typeof defaultText === 'string') {\n      this.defaultText = defaultText;\n    } else {\n      this.defaultText = defaultText();\n    }\n    this.includes = options?.includes;\n    this.excludes = options?.excludes;\n    this.proxyObj = this.proxyObj.bind(this);\n  }\n  proxyObj(\n    obj: any, \n    options?: { \n      key?: string, \n      defaultText?: string|(() => string), \n      includes?: (string|number)[],\n      excludes?: (string|number)[],\n    }\n  ){\n    let _defaultText;\n    const _includes = options?.includes || this.includes;\n    const _excludes = options?.excludes || this.excludes;\n    if (typeof options?.defaultText === 'function') {\n      _defaultText = options.defaultText();\n    } else {\n      _defaultText = options?.defaultText || this.defaultText;\n    }\n    /**\n     * 如果不是对象\n     */\n    if (typeof obj !== 'object') {\n      if (_excludes?.includes(obj)) {\n        return obj;\n      }\n      if (_includes?.includes(obj)) {\n        return _defaultText;\n      }\n      if (!obj) return _defaultText;\n      // warning\n      console.warn('为找到你的key')\n      return obj;\n    } else {\n      // 对象取key\n      // key 不存在直接给obj返回\n      const _key = options?.key;\n      if (!_key) return {...obj};\n      const _proxyObj = new Proxy({...obj}, {\n        get: (obj, prop) => {\n          if (_excludes?.includes(obj[prop])) return obj[prop];\n          if (_includes?.includes(obj[prop])) return _defaultText;\n          if (!obj[prop]) return _defaultText;\n          return obj[prop];\n        }\n      });\n      return _proxyObj[_key];\n    }\n  }\n}\n\nconst newProxy2Default = new Proxy2Default('暂无')\nexport const proxyObj = newProxy2Default.proxyObj.bind(newProxy2Default);\n\n// example\n// const firstProxy2Default = new Proxy2Default('暂无', { includes: ['0'] })\n// export default firstProxy2Default;\n"],"names":[],"mappings":"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"}